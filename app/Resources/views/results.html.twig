{% extends 'base.html.twig' %}

{% block scripts %}
	{{ parent() }}

	<script src="{{ asset('js/accordion.js') }}"></script>
{% endblock %}

{% block body %}
  {% for result in results %}
    <div class="result">
      {% for day in result.userDays %}
    		<div id="day{{ loop.index }}">
    			<button class="accordion">Day {{ loop.index }}</button>

    			<div class="panel">
    				<div id="hotspots">
    					{% for spot in day.hotspots %}
    						<li><em>{{ spot.name }}:</em> {{ spot.info }}</li>
    					{% endfor %}
    				</div>

    				<div id="testResults">
    					{% for testResult in day.tests %}
    						<li><em>{{ testResult.test.name }}:</em> {{ testResult.results }}</li>
    					{% endfor %}

    					{% for flash in app.session.get(result.id ~ '-test-results-' ~ day.id) %}
    						<li><em>{{ flash }}:</em> No results available</li>
    					{% endfor %}
    				</div>

    				<div id="medicationResults">
    					{% for medResult in day.medications %}
    						<li><em>{{ medResult.medication.name }}:</em> {{ medResult.results }}</li>
    					{% endfor %}

    					{% for flash in app.session.get(result.id ~ '-medication-results-' ~ day.id) %}
    						<li><em>{{ flash }}:</em> No results available</li>
    					{% endfor %}
    				</div>
    		</div>
    	</div>
    	{% endfor %}

      <a href="/removeResult/{{ result.id }}">Remove</a>
    </div>
  {% endfor %}
{% endblock %}
