{% extends 'base.html.twig' %}

{% block scripts %}
	{{ parent() }}

	<script src="{{ asset('js/accordion.js') }}"></script>
{% endblock %}

{% block header %}
	{% for flash in app.session.flashBag.get('finished') %}
		<div class="flash-finished">{{ flash }}</div>
	{% endfor %}
{% endblock %}

{% block body %}
	{% for day in user.days %}
		<div id="day{{ loop.index }}">
			<button class="accordion">Day {{ loop.index }}</button>

			<div class="panel">
				<div id="hotspots">
					{% for spot in day.hotspots %}
						<li>{{ spot.name }}: {{ spot.info }}</li>
					{% endfor %}
				</div>

				<div id="testResults">
					{% for testResult in day.tests %}
						<li>{{ testResult.test.name }}: {{ testResult.results }}</li>
					{% endfor %}
				</div>

				<div id="medicationResults">
					{% for medResult in day.medications %}
						<li>{{ medResult.medication.name }}: {{ medResult.results }}</li>
					{% endfor %}
				</div>
		</div>
	</div>
	{% endfor %}

	{% set page = app.session.get('page') %}
	{% if page == 'review' %}
		<a href="{{ path('nextDay') }}">Continue</a>
	{% else %}
		<a href="{{ path(page) }}">Resume</a>
	{% endif %}
{% endblock %}
