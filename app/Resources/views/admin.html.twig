{% extends 'base.html.twig' %}

{% block stylesheets %}
	{{ parent() }}

	<style>
		#footer {
			position: fixed;
			bottom: 0;
			width: 100%;
			padding: 4px;
			background: white;
			border-top: solid 1px #bbb;
		}

		#body {
			margin-bottom: 45px;
		}
	</style>
{% endblock %}

{% block scripts %}
	{{ parent() }}

	<script>
		$(function() {
			var form = $('form').attr('id');
			$('button[type=submit].button').each(function() {
				$('#footer').append($(this));
				$(this).attr('form', form);
			});
		});
	</script>
{% endblock %}

{% block body %}
	{% if form %}
		{{ form_start(form, {'attr': {'id': 'admin_form'}} ) }}

			{% if form.vars.name == "user" %}
				{{ form_row(form.email) }}
				{{ form_row(form.username) }}
				{{ form_row(form.uin) }}
				{{ form_row(form.plainPassword) }}
				{{ form_row(form.role) }}

				{{ form_rest(form) }}

				{% if form.vars.data.hasResults() %}
					<a href="{{ path('editUserResults', {'id': form.vars.data.id }) }}">View user's results</a>
				{% endif %}
			{% else %}
				{{ form_widget(form) }}
			{% endif %}

		{{ form_end(form) }}

	{% endif %}
{% endblock %}
